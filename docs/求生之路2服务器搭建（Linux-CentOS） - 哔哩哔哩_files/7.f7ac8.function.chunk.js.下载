(window.webpackJsonpwebpackLogReporter=window.webpackJsonpwebpackLogReporter||[]).push([[7],{171:function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return r});var t=o(29),s=o.n(t),t=o(9),i=o.n(t),t=o(10),n=o.n(t),l=o(3),u=o(0),r=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i()(this,t),this.scrollDivClass="report-scroll-module",this.scrollSubDivClass="report-scroll-sub-module",this.ignoreHidden=e.ignoreHidden||!1,this.scrollReportOffset=e.scrollReportOffset||200,this.scrollMsg=e.scrollMsg||{},this.scrollLintenerFns=[],this.extMsgs=e&&e.extMsgs||{},this.reportedIds=[],this.checkScroll()}return n()(t,[{key:"getOffset",value:function(e){var t={top:0,left:0};return{top:(t="function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():t).top+(window.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}}},{key:"judgeHidden",value:function(e){for(var t=e;t!==document.body;){if(window.getComputedStyle(t)&&"none"===window.getComputedStyle(t).display)return!0;t=t.parentNode}return!1}},{key:"inView",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e){var o=this.scrollReportOffset,i=e.getBoundingClientRect();if(0<o&&o<1&&(o=i.height/2),t){var n=window.innerHeight;return 0<=i.top&&n-i.top>o||i.top<0&&i.bottom>=o}t=document.documentElement||document.body.parentNode||document.body,n=window.pageYOffset||t.scrollTop,t=this.getOffset(e).top,e=window.innerHeight;window.innerWidth;return!(i.right<=0||i.left>=window.innerWidth)&&(n<=t&&t+o<n+e)}}},{key:"subInView",value:function(e,t){t=t.getBoundingClientRect(),e=e.getBoundingClientRect();return 0<=e.top&&e.top-t.top<t.height-this.scrollReportOffset}},{key:"judgeAppear",value:function(){for(var e=document.querySelectorAll("."+this.scrollDivClass),t=0;t<e.length;t++)e[t].getAttribute("scrollshow")||this.ignoreHidden&&this.judgeHidden(e[t])||this.inView(e[t])&&(-1==this.reportedIds.indexOf(e[t].id)&&this.reportedIds.push(e[t].id),e[t].setAttribute("scrollshow",!0),this.todo(e[t].id,t))}},{key:"judgeSubAppear",value:function(e){if(this.inView(e,!0))for(var t=e.querySelectorAll("."+this.scrollSubDivClass),o=0,i=t.length;o<i;o++)t[o].getAttribute("scrollshow")||this.ignoreHidden&&this.judgeHidden(t[o])||this.subInView(t[o],e)&&(t[o].setAttribute("scrollshow",!0),-1==this.reportedIds.indexOf(t[o].id)&&this.reportedIds.push(t[o].id),this.todo(t[o].id,o))}},{key:"judgeCustom",value:function(e,t,o,i){for(var n=e.querySelectorAll(t),s=0;s<n.length;s++){var r=n[s].getAttribute("scrollshow")||this.ignoreHidden&&this.judgeHidden(n[s]);if(!r&&this.inView(n[s])){n[s].setAttribute("scrollshow",!0);var l,u={};for(l in i)"function"==typeof i[l]?u[l]=i[l](n[s]):u[l]=i[l];this.todoCustom(o,s+1,u)}}}},{key:"checkScroll",value:function(){var e=this;e.judgeAppear(),window.addEventListener("scroll",u.a.throttleV2(function(){e.judgeAppear()},100,200),!1)}},{key:"addScrollListenNode",value:function(e){var t,o;e&&((t=this).judgeSubAppear(e),o=u.a.throttleV2(function(){t.judgeSubAppear(e)},100,200),this.scrollLintenerFns.push(o),e.addEventListener("scroll",o,!1))}},{key:"removeScrollListenNode",value:function(t){this.scrollLintenerFns.forEach(function(e){t.removeEventListener("scroll",e)})}},{key:"customReport",value:function(e,t,o,i,n){var s=this;this.judgeCustom(e,t,o,i),(n=n||window).addEventListener("scroll",u.a.throttleV2(function(){s.judgeCustom(e,t,o,i)},100,200),!1)}},{key:"todo",value:function(e,t){var o,i,n={num:t+1,name:"report-scroll-module",bsource:window.bsource||""},s=this.scrollMsg;for(o in s)"function"==typeof s[o]?n[o]=s[o]():n[o]=s[o];for(i in this.extMsgs)"function"==typeof this.extMsgs[i]?n[i]=this.extMsgs[i]():n[i]=this.extMsgs[i];var r=l.a.spmPrefix+".",t={};t.spm_id=r+e+".0",t.timestamp=(new Date).getTime(),t.msg=JSON.stringify(n),l.a.receiveGroupMsg({type:"appear",obj:t}),"function"==typeof l.a.reportH5SelfDef&&((t={}).spm_id=r+"show."+e,t.type="show",t.timestamp=(new Date).getTime(),n.uaSource=window.uaSource,t.args=JSON.stringify(n),t.abtest=u.a.getDefaultAbtestInfo(window.abtest),l.a.receiveGroupMsg({type:"h5_selfDef",obj:t}))}},{key:"todoCustom",value:function(e,t,o){var i={};"object"===s()(o)&&(o.bsource=window.bsource||"");var n=l.a.spmPrefix+".";i.spm_id="".concat(n).concat(e,".").concat(t),i.timestamp=(new Date).getTime(),i.msg=JSON.stringify(o),l.a.receiveGroupMsg({type:"appear",obj:i}),"function"==typeof l.a.reportH5SelfDef&&((i={}).spm_id="".concat(n,"show.").concat(e),i.type="show",i.timestamp=(new Date).getTime(),o.position=t,o.uaSource=window.uaSource,i.args=JSON.stringify(o),i.abtest=u.a.getDefaultAbtestInfo(window.abtest),l.a.receiveGroupMsg({type:"h5_selfDef",obj:i}))}}]),t}()}}]);